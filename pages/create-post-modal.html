<!-- Create Post Modal -->
<div class="modal-overlay" id="createPostModal">
  <div class="modal-container">
    <!-- Header -->
    <div class="modal-header">
      <button class="modal-back-btn" onclick="closeCreatePostModal()">
        <i data-lucide="arrow-left"></i>
      </button>
      <h2 class="modal-title">Create New Post</h2>
      <button class="modal-share-btn" onclick="submitPost()">Share</button>
    </div>

    <!-- Content -->
    <div class="modal-content">
      <!-- Media Preview Area -->
      <div class="post-media-container">
        <!-- Default Placeholder -->
        <div class="media-placeholder" id="mediaPlaceholder">
          <div class="placeholder-icon">
            <i data-lucide="image"></i>
            <i data-lucide="video"></i>
          </div>
          <p class="placeholder-text">Upload photos and videos here</p>
          <button class="select-btn" onclick="triggerMediaUpload()">
            Upload
          </button>
        </div>

        <!-- Media Preview (hidden by default) -->
        <div
          class="media-preview-wrapper"
          id="mediaPreviewWrapper"
          style="display: none"
        >
          <div class="media-zoom-container" id="mediaZoomContainer">
            <img
              id="postImagePreview"
              src=""
              alt="Preview"
              style="display: none"
            />
            <video id="postVideoPreview" controls style="display: none"></video>
          </div>

          <!-- Crop Ratio Selector -->
          <div class="crop-ratio-selector">
            <button
              class="ratio-btn active"
              data-ratio="original"
              onclick="changeCropRatio('original')"
              title="Original"
            >
              <i data-lucide="maximize-2"></i>
            </button>
            <button
              class="ratio-btn"
              data-ratio="1:1"
              onclick="changeCropRatio('1:1')"
              title="1:1 Square"
            >
              <i data-lucide="square"></i>
            </button>
            <button
              class="ratio-btn"
              data-ratio="4:5"
              onclick="changeCropRatio('4:5')"
              title="4:5 Portrait"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="5" y="2" width="10" height="16" rx="1" />
              </svg>
            </button>
            <button
              class="ratio-btn"
              data-ratio="16:9"
              onclick="changeCropRatio('16:9')"
              title="16:9 Landscape"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="2" y="6" width="16" height="8" rx="1" />
              </svg>
            </button>
          </div>

          <!-- Zoom Controls -->
          <div class="zoom-controls">
            <button class="zoom-btn" onclick="zoomIn()" title="Zoom in">
              <i data-lucide="zoom-in"></i>
            </button>
            <button class="zoom-btn" onclick="resetZoom()" title="Reset zoom">
              <i data-lucide="maximize-2"></i>
            </button>
            <button class="zoom-btn" onclick="zoomOut()" title="Zoom out">
              <i data-lucide="zoom-out"></i>
            </button>
          </div>

          <button class="change-media-btn" onclick="triggerMediaUpload()">
            <i data-lucide="image"></i>
          </button>
        </div>

        <input
          type="file"
          id="postMediaInput"
          accept="image/*,video/*"
          style="display: none"
          onchange="handleMediaUpload(event)"
        />
      </div>

      <!-- Right Panel -->
      <div class="post-details-panel">
        <!-- User Info -->
        <div class="post-user-info">
          <img id="post-user-avatar" src="" alt="avatar" class="user-avatar" />
          <span id="post-user-name" class="user-name">User</span>
        </div>

        <!-- Caption Input -->
        <div class="post-caption-container">
          <textarea
            id="postCaption"
            class="post-caption-input"
            placeholder="Write a caption..."
            maxlength="2200"
            oninput="updateCharCount()"
          ></textarea>
          <div class="char-count"><span id="charCount">0</span>/2200</div>
        </div>

        <!-- Emoji Button -->
        <button class="emoji-btn" onclick="toggleEmojiPicker()">
          <i data-lucide="smile"></i>
        </button>

        <!-- Location Section -->
        <div class="post-section">
          <div class="section-header" onclick="toggleSection('location')">
            <span class="section-title">Add location</span>
            <i data-lucide="map-pin" class="section-icon"></i>
          </div>
          <div
            class="section-content"
            id="locationContent"
            style="display: none"
          >
            <input
              type="text"
              class="location-input"
              placeholder="Search location..."
            />
          </div>
        </div>

        <!-- Collaborators Section -->
        <div class="post-section">
          <div class="section-header" onclick="toggleSection('collaborators')">
            <span class="section-title">Add collaborators</span>
            <i data-lucide="users" class="section-icon"></i>
          </div>
          <div
            class="section-content"
            id="collaboratorsContent"
            style="display: none"
          >
            <input
              type="text"
              class="collaborator-input"
              placeholder="Search users..."
            />
          </div>
        </div>

        <!-- Advanced Settings -->
        <div class="post-section">
          <div
            class="section-header expandable"
            onclick="toggleSection('advanced')"
          >
            <span class="section-title">Also share to</span>
            <i data-lucide="chevron-down" class="chevron-icon"></i>
          </div>
          <div
            class="section-content advanced-settings"
            id="advancedContent"
            style="display: none"
          >
            <!-- Share to Threads -->
            <div class="setting-item">
              <div class="setting-info">
                <img
                  src="https://via.placeholder.com/32"
                  alt="Threads"
                  class="platform-icon"
                />
                <div class="setting-details">
                  <span class="setting-name">nmin301</span>
                  <span class="setting-desc">Threads • Public</span>
                </div>
              </div>
              <div class="toggle-switch active">
                <div class="toggle-slider"></div>
              </div>
            </div>

            <!-- Share to Facebook -->
            <div class="setting-item">
              <div class="setting-info">
                <img
                  src="https://via.placeholder.com/32"
                  alt="Facebook"
                  class="platform-icon"
                />
                <div class="setting-details">
                  <span class="setting-name">Dang Nhat Minh</span>
                  <span class="setting-desc">Facebook • Only me</span>
                </div>
              </div>
              <div class="toggle-switch">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
