/* Stories container */
.stories {
  display: flex;
  gap: 16px;
  padding: 16px 20px;
  overflow-x: auto;
}

.stories::-webkit-scrollbar {
  display: none;
}

/* Story item */
.story {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 82px;
  cursor: pointer;
}

/* Avatar wrapper */
.story-avatar {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  padding: 3px;

  /* Same gradient as .post-avatar-ring.story-ring-unseen for visual consistency */
  background: conic-gradient(
    from 210deg,
    var(--story-ring-ig-2) 0deg,
    var(--story-ring-ig-3) 110deg,
    var(--story-ring-ig-4) 210deg,
    var(--story-ring-ig-5) 300deg,
    var(--story-ring-ig-1) 360deg
  );

  display: flex;
  align-items: center;
  justify-content: center;
}

/* Avatar image */
.story-avatar img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 2px solid var(--story-ring-gap-color);
  object-fit: cover;
  box-sizing: border-box;
}

/* Story name */
.story-name {
  margin-top: 8px;
  font-size: 13px;
  color: var(--text-secondary);
  max-width: 82px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Your story */
.story-avatar.own {
  background: var(--bg-active);
  position: relative;
}

.story-avatar.own .plus {
  position: absolute;
  bottom: -2px;
  right: -2px;

  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: var(--accent-secondary);
  color: var(--text-white);

  font-size: 15px;
  font-weight: 600;

  display: flex;
  align-items: center;
  justify-content: center;

  border: 2px solid var(--bg-secondary);
}

/* Shared story ring utilities (reusable across feed/profile/story surfaces) */
/*
 * Structure (concentric circles, all same shape, only different size):
 *   Outer ring:  44x44  border-radius:50%  → gradient background
 *   Image+gap:   40x40  border-radius:50%  → img with 2px solid border (gap color)
 *   Visible img: 36x36                     → actual photo
 *
 * No padding involved. Grid centering guarantees same center point.
 * Both shapes are border-radius:50% → identical shape, different scale → uniform ring.
 */
.post-avatar-ring {
  --_avatar: 36px;
  --_ring: 2px;
  --_gap: 2px;
  --_outer: calc(var(--_avatar) + (var(--_ring) + var(--_gap)) * 2);

  text-decoration: none;
  line-height: 0;
  display: inline-grid;
  place-items: center;
  width: var(--_avatar);
  height: var(--_avatar);
  border-radius: 50%;
  overflow: visible;
  box-sizing: border-box;
  vertical-align: top;
  flex-shrink: 0;
  background: transparent;
  padding: 0;
}

/* When ring is active: expand wrapper to outer size, NO padding */
.post-avatar-ring.story-ring-unseen,
.post-avatar-ring.story-ring-seen {
  width: var(--_outer);
  height: var(--_outer);
}

/* Image always stays at avatar size; gap border adds 2px outward via content-box */
.post-avatar-ring .post-avatar {
  width: var(--_avatar);
  height: var(--_avatar);
  border-radius: 50%;
  object-fit: cover;
  object-position: center;
  display: block;
  border: 0;
  box-sizing: content-box;
}

.post-avatar-ring.story-ring-unseen .post-avatar,
.post-avatar-ring.story-ring-seen .post-avatar {
  border: var(--_gap) solid var(--story-ring-gap-color);
}

.post-avatar-ring.story-ring-unseen {
  background: conic-gradient(
    from 210deg,
    var(--story-ring-ig-2) 0deg,
    var(--story-ring-ig-3) 110deg,
    var(--story-ring-ig-4) 210deg,
    var(--story-ring-ig-5) 300deg,
    var(--story-ring-ig-1) 360deg
  );
}

.post-avatar-ring.story-ring-seen {
  background: var(--story-ring-seen-color);
}

@media (max-width: 768px) {
  .post-avatar-ring {
    --_avatar: 32px;
  }
}

@media (max-width: 480px) {
  .post-avatar-ring {
    --_avatar: 28px;
  }
}

/* ─── Story Feed: Scroll enhancements ─── */
.stories {
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x proximity;
  scrollbar-width: none; /* Firefox */
}

.story {
  scroll-snap-align: start;
  flex-shrink: 0;
}

/* ─── Story Feed: Avatar wrapper (holds ring + add btn) ─── */
.story-avatar-wrapper {
  position: relative;
  width: 72px;
  height: 72px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.story-avatar-wrapper .post-avatar-ring {
  --_avatar: 60px;
  cursor: pointer;
}

.story-avatar-wrapper .post-avatar-ring .post-avatar {
  width: var(--_avatar);
  height: var(--_avatar);
}

/* ─── Story Feed: Add button Overlay (Centered, no-story state) ─── */
.story-own {
  cursor: pointer;
}

.story-own[data-has-stories="false"] .post-avatar {
  filter: brightness(0.7); /* Làm avatar tối đi một chút để tôn lên nút + */
  transition: filter var(--transition-normal);
}

.story-add-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 5;
}

.story-add-center-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  /* Glassmorphism Effect */
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  color: #ffffff;
  border: 1px solid rgba(255, 255, 255, 0.3);

  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: all var(--transition-normal);
}

.story-own:hover .story-add-center-btn {
  background: rgba(255, 255, 255, 0.35);
  transform: scale(1.1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.story-own:hover .post-avatar {
  filter: brightness(0.85);
}

.story-add-center-btn svg {
  width: 18px;
  height: 18px;
  display: block;
  color: white;
}

/* ─── Story Feed: Ring None state (no active stories) ─── */
.post-avatar-ring.story-ring-none {
  width: var(--_outer);
  height: var(--_outer);
  background: var(--story-ring-seen-color);
}

.post-avatar-ring.story-ring-none .post-avatar {
  border: var(--_gap) solid var(--story-ring-gap-color);
  opacity: 0.7;
}

/* ─── Story Feed: Skeleton loading ─── */
.story-skeleton {
  pointer-events: none;
}

.story-avatar-skeleton {
  width: 68px;
  height: 68px;
  border-radius: 50%;
}

.story-name-skeleton {
  width: 52px;
  height: 10px;
  border-radius: 4px;
  margin-top: 8px;
}
